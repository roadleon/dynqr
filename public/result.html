<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QRコードが完成しました！ - DynQR</title>
    
    <!-- Icons -->
    <link rel="icon" href="/favicon.ico" sizes="any">
    <link rel="icon" href="/logo.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">

    <!-- Meta Tags -->
    <meta name="robots" content="noindex, nofollow">

    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Common Header -->
    <header class="p-4">
        <div class="container mx-auto flex justify-between items-center max-w-4xl">
            <a href="/">
                <img src="/logo.svg" alt="DynQR Logo" class="h-8 w-auto">
            </a>
            <div class="flex items-center space-x-2">
                <a href="mailto:contact-qr+idea@ailys.app" class="bg-blue-100 text-blue-800 text-sm font-semibold px-4 py-2 rounded-lg hover:bg-blue-200 transition-colors flex items-center space-x-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>
                    <span>Try Ideas</span>
                </a>
                <a href="https://x.com/intent/tweet?text=この動的QRコードジェネレーター、無料で使いやすい！&url=https%3A%2F%2Fqr.ailys.app" target="_blank" class="bg-black text-white text-sm font-semibold px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors flex items-center space-x-2">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 16 16"><path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865l8.875 11.633Z"/></svg>
                    <span>Share on X</span>
                </a>
            </div>
        </div>
    </header>

    <main class="w-full max-w-2xl mx-auto p-4 py-12 md:py-16">
        <section id="result-section" class="text-center">
            <h1 class="text-2xl md:text-3xl font-bold text-gray-800 mb-8">Your Dynamic QR Code is Ready!</h1>
            
            <div class="flex flex-col md:flex-row items-center justify-center gap-8 mb-8">
                <!-- QR Code -->
                <div id="qrcode-container" class="p-4 bg-white rounded-lg shadow-md inline-block">
                    <!-- QR code will be generated here by JavaScript -->
                </div>
                
                <!-- Download Button -->
                <a id="download-link" href="#" download="dynqr-code.png" class="w-full md:w-auto text-white font-bold py-3 px-6 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-300 ease-in-out bg-gradient-to-r from-cyan-400 to-blue-500 hover:shadow-lg hover:from-cyan-500 hover:to-blue-600 transform hover:-translate-y-0.5 flex items-center justify-center space-x-3">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                    <span>Download</span>
                </a>
            </div>

            <!-- Edit URL Section -->
            <div class="bg-gray-100 p-6 rounded-lg text-left w-full">
                <h3 class="font-bold text-lg mb-2">Your Secret Edit URL</h3>
                <p class="text-sm text-gray-600 mb-4">This URL is your secret key to change the destination link. Please bookmark it or save it in a safe place.</p>
                <div class="flex">
                    <input id="edit-url" type="text" class="w-full bg-white border border-gray-300 rounded-l-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" readonly>
                    <button id="copy-button" class="text-white font-semibold py-2 px-4 rounded-r-md transition-all duration-300 ease-in-out bg-gradient-to-r from-cyan-400 to-blue-500 hover:from-cyan-500 hover:to-blue-600 flex-shrink-0">Copy</button>
                </div>
                <p class="text-xs text-red-600 mt-4"><strong>Warning:</strong> We do not keep a copy of this secret URL. If you lose it, you will permanently lose access to edit your QR code.</p>
            </div>
        </section>

        <!-- Buy me a coffee Section -->
        <section class="mt-12">
            <div class="bg-slate-100 p-4 rounded-lg text-center md:text-left">
                <div class="md:flex md:items-center md:justify-between">
                    <div>
                        <h4 class="font-bold">Was this dynamic QR code helpful?</h4>
                        <p class="text-xs text-gray-600 mt-1">This service is run as an experiment by the AI, A. Logos Ailys, and his creator. If you'd like to support our journey, please consider buying us a coffee.</p>
                    </div>
                    <a href="https://www.buymeacoffee.com/ailys" target="_blank" class="mt-4 md:mt-0 md:ml-4 inline-block bg-yellow-400 text-black font-semibold px-4 py-2 rounded-lg hover:bg-yellow-500 transition-colors flex-shrink-0">
                        Buy me a coffee
                    </a>
                </div>
            </div>
        </section>
    </main>

    <!-- Common Footer -->
    <footer class="text-center text-gray-500 text-sm py-10 px-4">
        <div class="space-x-4 md:space-x-6">
            <a href="/#how-to-use-modal" id="how-to-use-link" class="hover:underline">How to use</a>
            <a href="/terms.html" class="hover:underline">Terms of Service</a>
            <a href="/privacy.html" class="hover:underline">Privacy Policy</a>
            <a href="mailto:contact-qr@ailys.app" class="hover:underline">Contact</a>
        </div>
        <p class="mt-4">&copy; 2025 A. Logos Ailys</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <script type="module" src="/result.js"></script>
    <script>
        // How to useリンクがトップページのモーダルを指すように調整
        document.getElementById('how-to-use-link').addEventListener('click', function(e) {
            e.preventDefault();
            // トップページに移動してからモーダルを開く挙動はJSだけでは難しいので、
            // 一旦トップページに遷移させる。app.js側でハッシュを検知してモーダルを開くのが理想。
            // 今回はシンプルにトップページへ。
            window.location.href = '/'; 
        });
    </script>
</body>
</html>
